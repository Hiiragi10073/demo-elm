(function(t){function e(e){for(var a,r,c=e[0],o=e[1],u=e[2],d=0,f=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var o=n[c];0!==s[o]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/demo-elm/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0789":function(t,e,n){},1e3:function(t,e,n){},1110:function(t,e,n){},"2b7a":function(t,e,n){},5454:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("4de4"),n("0653");var a=n("34e9"),s=(n("5246"),n("6b41")),i=(n("be7f"),n("565f")),r=(n("c194"),n("7744")),c=(n("2994"),n("2bdd")),o=(n("4142"),n("39d1")),u=(n("0ec5"),n("21ab")),l=(n("3df5"),n("2830")),d=(n("4b0a"),n("2bb1")),f=(n("7844"),n("5596")),p=(n("c3a6"),n("ad06")),v=(n("a52c"),n("2ed4")),h=(n("537a"),n("ac28")),m=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},y=[],_=n("2877"),b={},C=Object(_["a"])(b,g,y,!1,null,null,null),k=C.exports,w=n("8c4f"),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Main"},[n("div",{staticClass:"header"},[n("router-link",{attrs:{to:"/search"}},[n("i",{staticClass:"iconfont icon-search"})]),n("router-link",{staticClass:"address",attrs:{to:"/address"}},[n("div",[t._v(t._s(t.$store.getters.address))])]),n("div",{staticClass:"sign"},[n("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("登录")]),n("span",{staticClass:"link"},[t._v("|")]),n("router-link",{staticClass:"link",attrs:{to:"/register"}},[t._v("注册")])],1)],1),n("div",{staticClass:"categorys"},[n("van-swipe",{attrs:{duration:"300"},on:{change:t.swipeChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[n("div",{staticClass:"custom-indicator"},[n("div",{staticClass:"indicator",class:{active:0===t.swipeIndex}}),n("div",{staticClass:"indicator",class:{active:1===t.swipeIndex}})])]},proxy:!0}])},[n("van-swipe-item",[n("van-grid",t._l(t.categorys.list1,(function(e){return n("van-grid-item",{key:e.id,on:{click:function(n){return t.toCategoryDetail(e.id)}}},[n("img",{staticClass:"category-img",attrs:{src:t._f("addBaseURL")(e.image_url)}}),n("span",[t._v(t._s(e.title))])])})),1)],1),n("van-swipe-item",[n("van-grid",t._l(t.categorys.list2,(function(e){return n("van-grid-item",{key:e.id,on:{click:function(n){return t.toCategoryDetail(e.id)}}},[n("img",{staticClass:"category-img",attrs:{src:t._f("addBaseURL")(e.image_url)}}),n("span",[t._v(t._s(e.title))])])})),1)],1)],1)],1),n("div",{staticClass:"shop-list"},[t._m(0),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",offset:"500"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.shopList,(function(t){return n("elm-shop-item",{key:t.id,attrs:{data:t}})})),1)],1),n("div",{staticClass:"tabber"},[n("elm-tabbar")],1)])},$=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("i",{staticClass:"iconfont icon-shangdian"}),n("span",[t._v("附近商家")])])}],S=n("2909"),j=(n("96cf"),n("1da1")),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-tabbar",{staticClass:"elm-tabbar",attrs:{"active-color":"#000"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{to:"/main"},scopedSlots:t._u([{key:"icon",fn:function(e){return[n("van-icon",{staticClass:"iconfont icon-logo",class:e.active?t.icon.active:""})]}}])},[n("span",[t._v("外卖")])]),n("van-tabbar-item",{attrs:{to:"/search"},scopedSlots:t._u([{key:"icon",fn:function(e){return[n("van-icon",{staticClass:"iconfont icon-search",class:e.active?t.icon.active:""})]}}])},[n("span",[t._v("搜索")])]),n("van-tabbar-item",{attrs:{to:"/orders"},scopedSlots:t._u([{key:"icon",fn:function(e){return[n("van-icon",{staticClass:"iconfont icon-order",class:e.active?t.icon.active:""})]}}])},[n("span",[t._v("订单")])]),n("van-tabbar-item",{attrs:{to:"/profile"},scopedSlots:t._u([{key:"icon",fn:function(e){return[n("van-icon",{staticClass:"iconfont icon-user",class:e.active?t.icon.active:""})]}}])},[n("span",[t._v("我的")])])],1)},L=[],R={data:function(){return{active:0,icon:{active:"active"}}}},H=R,A=(n("b81f"),Object(_["a"])(H,O,L,!1,null,"bb8de822",null)),I=A.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elm-shop-item",on:{click:function(e){return t.toShopDetail(t.data.id)}}},[n("img",{attrs:{src:"http://localhost:8000/img/"+t.data.image_path,alt:""}}),n("div",{staticClass:"info"},[n("div",{staticClass:"top"},[n("div",{staticClass:"title"},[t.data.is_premium?n("span",{staticClass:"premium"},[t._v("品牌")]):t._e(),n("span",{staticClass:"name"},[t._v(t._s(t.data.name))])]),n("div",{staticClass:"supports"},t._l(t.data.supports,(function(e){return n("div",{key:e.id,staticClass:"supports-icon"},[t._v(t._s(e.icon_name))])})),0)]),n("div",{staticClass:"middle"},[n("div",{staticClass:"rate"},[n("van-rate",{staticClass:"rate",attrs:{size:12,color:"#ff9a0d","void-icon":"star","void-color":"#eee",readonly:""},model:{value:t.data.rating,callback:function(e){t.$set(t.data,"rating",e)},expression:"data.rating"}}),n("span",{staticClass:"rate-text"},[t._v(t._s(t.data.rating)+" ")]),n("span",[t._v("月售"+t._s(t.data.recent_order_num)+"单")])],1),n("div",{staticClass:"delivery_mode"},[t.data.delivery_mode?n("div",{staticClass:"mode",style:{backgroundColor:"#"+t.data.delivery_mode.color}},[t._v(t._s(t.data.delivery_mode.text))]):t._e()])]),n("div",{staticClass:"bottom"},[n("div",{staticClass:"piece"},[n("span",[t._v("￥20起送 / "+t._s(t.data.piecewise_agent_fee.tips))])]),n("div",[n("span",[t._v(t._s(t.data.distance))]),t._v(" / "),n("span",{staticClass:"time"},[t._v(t._s(t.data.order_lead_time))])])])])])},P=[],T={props:["data"],methods:{toShopDetail:function(t){this.$router.push("/shopDetail/".concat(t))}}},D=T,M=(n("9ae8"),n("a7a8"),Object(_["a"])(D,E,P,!1,null,"ecefdfb6",null)),U=M.exports,B=(n("d3b7"),n("bc3a")),G=n.n(B);function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a,s){var i;i="GET"===n?G.a.get(t,{params:e}):G.a.post(t,e),i.then((function(t){a(t.data)})).catch((function(t){s(t)}))}))}G.a.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),G.a.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var q="https://elm.cangdu.org",z=function(t){return J("".concat(q,"/shopping/restaurants"),t)},F=function(){return J("".concat(q,"/v2/index_entry"))},N=function(t){return J("".concat(q,"/v1/cities"),t)},K=function(t){return J("".concat(q,"/v1/pois"),t)},Q={data:function(){return{categorys:{list1:[],list2:[]},swipeIndex:0,shopList:[],loading:!1,finished:!1,config:{latitude:"",longitude:"",offset:0,limit:20}}},components:{elmTabbar:I,elmShopItem:U},methods:{getCategorys:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(n=e.sent,!n){e.next=8;break}t.categorys.list1=n.filter((function(t,e){return e<8})),t.categorys.list2=n.filter((function(t,e){return e>=8})),e.next=9;break;case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})))()},getShopList:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(t.config);case 2:n=e.sent,n&&((a=t.shopList).push.apply(a,Object(S["a"])(n)),t.shopList.length%t.config.limit!==0&&(t.finished=!0));case 4:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.config.offset+=t.config.limit,e.next=3,t.getShopList(t.config);case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},swipeChange:function(t){this.swipeIndex=t},toCategoryDetail:function(t){console.log(t)}},created:function(){this.getCategorys(),this.$store.state.addressInfo.address?(this.config.latitude=""+this.$store.state.addressInfo.latitude,this.config.longitude=""+this.$store.state.addressInfo.longitude,this.getShopList()):(this.loading=!1,this.finished=!0)}},V=Q,W=(n("cc1a"),n("7489"),Object(_["a"])(V,x,$,!1,null,"44d139ce",null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Address"},[n("div",{staticClass:"header"},[n("router-link",{attrs:{to:"/main"}},[n("span",{staticClass:"logo"},[t._v("ele.me")])]),n("div",{staticClass:"sign"},[n("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("登录")]),n("span",{staticClass:"link"},[t._v("|")]),n("router-link",{staticClass:"link",attrs:{to:"/register"}},[t._v("注册")])],1)],1),n("div",{staticClass:"location"},[t._m(0),n("van-cell",{attrs:{title:t.location.name,"title-class":"slect-cityname","is-link":""},on:{click:function(e){return t.toSelectAddress(t.location)}}})],1),n("div",{staticClass:"hot-city-list"},[n("div",{staticClass:"title"},[t._v("热门城市")]),n("van-grid",t._l(t.hotCityList,(function(e){return n("van-grid-item",{key:e.id,staticClass:"city",attrs:{text:e.name,gutter:"2px"},on:{click:function(n){return t.toSelectAddress(e)}}})})),1)],1),t._l(t.cityListHash,(function(e){return n("div",{key:e,staticClass:"city-list"},[n("div",{staticClass:"title"},[t._v(" "+t._s(e)+" "),"A"===e?n("span",{staticClass:"tips-text"},[t._v("(按字母排序)")]):t._e()]),n("van-grid",t._l(t.cityList[e],(function(e){return n("van-grid-item",{key:e.id,staticClass:"city",attrs:{text:e.name,gutter:"2px"},on:{click:function(n){return t.toSelectAddress(e)}}})})),1)],1)}))],2)},Z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tips"},[n("span",[t._v("当前定位城市：")]),n("span",{staticClass:"tips-text"},[t._v("定位不准时，请在城市列表中选择")])])}],tt=(n("b64b"),{data:function(){return{location:{},hotCityList:[],cityList:{}}},computed:{cityListHash:function(){return Object.keys(this.cityList).sort()}},methods:{getLocation:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N({type:"guess"});case 2:n=e.sent,t.location=n,t.$store.commit("changeCity",n);case 5:case"end":return e.stop()}}),e)})))()},getHotCityList:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N({type:"hot"});case 2:n=e.sent,t.hotCityList=n;case 4:case"end":return e.stop()}}),e)})))()},getCityList:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N({type:"group"});case 2:n=e.sent,t.cityList=n;case 4:case"end":return e.stop()}}),e)})))()},toSelectAddress:function(t){this.$store.commit("changeCity",t),this.$router.push("/select-address")}},created:function(){this.getHotCityList(),this.getCityList(),this.getLocation()}}),et=tt,nt=(n("570a"),n("b6d0"),Object(_["a"])(et,Y,Z,!1,null,"6316e9b7",null)),at=nt.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SelectAddress"},[n("elm-header",{attrs:{rightText:"切换城市",title:t.$store.state.city.name,onClickRight:t.onClickRight}}),n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"search-ipt",attrs:{type:"text",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticClass:"submit",on:{click:t.search}},[t._v("提交")])]),t.showHistory?n("div",{staticClass:"history"},[n("div",{staticClass:"title"},[t._v("搜索历史")]),t._l(t.$store.state.citySearchHistory,(function(e){return n("van-cell-group",{key:e.id},[n("van-cell",{attrs:{title:e.name,label:e.address},on:{click:function(n){return t.selectAddress(e)}}})],1)})),n("button",{staticClass:"clear",on:{click:t.clearHistory}},[t._v("清空所有")])],2):t._e(),t.searchRes.length?n("div",{staticClass:"search-result"},t._l(t.searchRes,(function(e){return n("van-cell-group",{key:e.geohash},[n("van-cell",{attrs:{title:e.name,label:e.address},on:{click:function(n){return t.selectAddress(e)}}})],1)})),1):t._e()],1)},it=[],rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("van-nav-bar",{attrs:{title:t.title,"right-text":t.rightText,"left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)},"click-right":t.onClickRight}})],1)},ct=[],ot={props:{onClickRight:{type:Function,default:function(){this.$router.go(-1)}},rightText:{type:String,default:""},title:{type:String,default:"标题"}}},ut=ot,lt=(n("e009"),Object(_["a"])(ut,rt,ct,!1,null,null,null)),dt=lt.exports,ft={data:function(){return{keyword:"",showHistory:!0,searchRes:[]}},created:function(){this.$store.state.citySearchHistory.length?this.showHistory=!0:this.showHistory=!1},methods:{onClickRight:function(){this.$router.push("/address")},search:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.keyword){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K({city_id:t.$store.state.city.id,keyword:t.keyword,type:"search"});case 4:n=e.sent,t.searchRes=n,t.$store.commit("addHistory",n);case 7:case"end":return e.stop()}}),e)})))()},clearHistory:function(){this.$store.commit("clearHistory"),this.showHistory=!0},selectAddress:function(t){this.$store.commit("selectAddress",t),this.$router.push("/main")}},components:{elmHeader:dt}},pt=ft,vt=(n("e8c9"),Object(_["a"])(pt,st,it,!1,null,"7b1ab36c",null)),ht=vt.exports;m["a"].use(w["a"]);var mt=new w["a"]({routes:[{path:"/",redirect:"/main"},{path:"/main",component:X},{path:"/search",component:X},{path:"/orders",component:X},{path:"/profile",component:X},{path:"/address",component:at},{path:"/select-address",component:ht},{path:"/login",component:X},{path:"/register",component:X},{path:"/shopDetail/:id",component:X}]}),gt=mt,yt=(n("b0c0"),n("2f62"));m["a"].use(yt["a"]);var _t={city:{},addressInfo:{},citySearchHistory:[]},bt={changeCity:function(t,e){t.city=e},selectAddress:function(t,e){t.addressInfo=e},addHistory:function(t,e){var n;(n=t.citySearchHistory).push.apply(n,Object(S["a"])(e))},clearHistory:function(t){t.citySearchHistory=[]}},Ct={address:function(t){return t.addressInfo.name?t.addressInfo.name:"请选择地址"}},kt=new yt["a"].Store({state:_t,mutations:bt,getters:Ct}),wt=kt;n("adcf"),n("499a"),n("b6b1");m["a"].use(h["a"]),m["a"].use(v["a"]),m["a"].use(p["a"]),m["a"].use(f["a"]),m["a"].use(d["a"]),m["a"].use(l["a"]),m["a"].use(u["a"]),m["a"].use(o["a"]),m["a"].use(c["a"]),m["a"].use(r["a"]),m["a"].use(i["a"]),m["a"].use(s["a"]),m["a"].use(a["a"]),m["a"].filter("addBaseURL",(function(t){return"https://fuss10.elemecdn.com/"+t})),m["a"].config.productionTip=!1,new m["a"]({router:gt,store:wt,render:function(t){return t(k)}}).$mount("#app")},"570a":function(t,e,n){"use strict";var a=n("2b7a"),s=n.n(a);s.a},7489:function(t,e,n){"use strict";var a=n("b621"),s=n.n(a);s.a},"86f0":function(t,e,n){},"9ae8":function(t,e,n){"use strict";var a=n("0789"),s=n.n(a);s.a},a7a8:function(t,e,n){"use strict";var a=n("1110"),s=n.n(a);s.a},adcf:function(t,e,n){},b621:function(t,e,n){},b6b1:function(t,e,n){},b6d0:function(t,e,n){"use strict";var a=n("b911"),s=n.n(a);s.a},b81f:function(t,e,n){"use strict";var a=n("1000"),s=n.n(a);s.a},b911:function(t,e,n){},cc1a:function(t,e,n){"use strict";var a=n("5454"),s=n.n(a);s.a},e009:function(t,e,n){"use strict";var a=n("fb27"),s=n.n(a);s.a},e8c9:function(t,e,n){"use strict";var a=n("86f0"),s=n.n(a);s.a},fb27:function(t,e,n){}});
//# sourceMappingURL=app.e1b323c0.js.map